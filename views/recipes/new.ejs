<%- include ("../partials/header")%>

<div class="container">
	<div class="row">
		<div class = "col-md-4">
			<p class = "lead"> <strong>Create a new Recipe</strong></p>
				<form action="/farms/<%=farm._id%>/recipes" method="POST">
					<div class="form-group">
						<input class="form-control" type="text" name="name" placeholder="name"> 	
					</div>
					<div class="form-group">
						<input class="form-control" type="text" name="image" placeholder="image url">
					</div>
					<div class="form-group">
						<input class="form-control" type="text" name="description" placeholder="description">
					</div>
						<div id="inputFormRow">
							<div class="input-group mb-3">
								<input type="text" id="title"  name="item[title][]" class="form-control m-input" placeholder="Ingredient " />
									<span class="input-group-addon">-</span>
								<input type="text" name="item[val][]" class="form-control m-input" placeholder="Quantity"/>	 
							</div>
							<div class="input-group-append">
								<button id="removeRow" type="button" class="btn btn-danger">Remove</button>
							</div>
						</div>
						<div id="inputFormRow">
							<div class="input-group mb-3">
								<input type="text" id="title"  name="item[title][]" class="form-control m-input" placeholder="Ingredient " autocomplete="off"/>
									<span class="input-group-addon">-</span>
								<input type="text" name="item[val][]" class="form-control m-input" placeholder="Quantity" autocomplete="off"/>	 
							</div>
							<div class="input-group-append">
								<button id="removeRow" type="button" class="btn btn-danger">Remove</button>
							</div>
						</div>
						<div id="inputFormRow">
							<div class="input-group mb-3">
								<input type="text"  id="title" name="item[title][]" class="form-control m-input" placeholder="Ingredient " autocomplete="off"/>
									<span class="input-group-addon">-</span>
								<input type="text" name="item[val][]" class="form-control m-input" placeholder="Quantity" autocomplete="off"/>	 
							</div>
							<div class="input-group-append">
								<button id="removeRow" type="button" class="btn btn-danger">Remove</button>
							</div>
						</div>
						<div id="inputFormRow">
							<div class="input-group mb-3">
								<input type="text" id="title"  name="item[title][]" class="form-control m-input" placeholder="Ingredient " autocomplete="off"/>
									<span class="input-group-addon">-</span>
								<input type="text" name="item[val][]" class="form-control m-input" placeholder="Quantity" autocomplete="off"/>	 
							</div>
							<div class="input-group-append">
								<button id="removeRow" type="button" class="btn btn-danger">Remove</button>
							</div>
						</div>
						<div id="inputFormRow">
							<div class="input-group mb-3">
								<input type="text" id="title" name="item[title][]" class="form-control m-input" placeholder="Ingredient " autocomplete="off"/>
									<span class="input-group-addon">-</span>
									<input type="text" name="item[val][]" class="form-control m-input " placeholder="Quantity" autocomplete="off"/>	 
							</div>
							<div class="input-group-append">
								<button id="removeRow" type="button" class="btn btn-danger">Remove</button>
							</div>
						</div>
							<div id="newRow"></div>
								<button id="addRow" type="button" class="btn btn-info">Add Row</button>
							<div class="form-group">
								<button type="submit" name="send" id="send" value="Send" class="btn btn-lg btn-primary btn-block">Submit!</button>

							</div>
				</form>	
			<a href="/recipes">Go Back</a>	
		</div>
	</div>	
</div>	

<script type="text/javascript">
$("#addRow").click(function () {
            var html = '';
            html += '<div id="inputFormRow">';
            html += '<div class="input-group mb-3">';
            html += '<input type="text" name="item[title][]" class="form-control m-input" placeholder="Ingredient" autocomplete="off">';
			html += '<span class="input-group-addon">-</span>';
			html += '<input type="text" name="item[val][]" class="form-control m-input" placeholder="Quantity" autocomplete="off">';
			html += '</div>';
            html += '<div class="input-group-append">';
            html += '<button id="removeRow" type="button" class="btn btn-danger">Remove</button>';
            html += '</div>';
            html += '</div>';
     $('#newRow').append(html);
        });
// remove row
	$(document).on('click', '#removeRow', function () {
		$(this).closest('#inputFormRow').remove();
	});
//delete empty rows
	$('#send').click(function(){ 
		$(':input[type="text"]').filter(function(e){
			if (this.value.length===0){
			  return true;
			}  
		}).remove();
	});


	

	
</script>
<%- include ("../partials/footer")%>








